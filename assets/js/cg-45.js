(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{458:function(s,a,e){"use strict";e.r(a);var t=e(22),r=Object(t.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("p",[s._v("目的：使用数据泵，将一台电脑上的数据库导出，导入到另一台电脑上的数据库。")]),s._v(" "),e("h4",{attrs:{id:"a电脑上的操作。expdp数据导出"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#a电脑上的操作。expdp数据导出"}},[s._v("#")]),s._v(" A电脑上的操作。expdp数据导出")]),s._v(" "),e("p",[s._v("1、运行cmd；")]),s._v(" "),e("p",[s._v("2、登录数据库，输入命令：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("sqlplus system/密码；\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("3、创建目录路径：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("create directory backup_path as ‘E:\\app\\tws\\oradata\\orcldv’;  \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("(backup_path为路径名称，可自命名（必须是已存在路径），E:\\app\\tws\\oradata\\orcl为源数据库路径)")]),s._v(" "),e("p",[s._v("5、导入导出操作授权：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("grant exp_full_database,imp_full_database to dmuser;  (dmuser为数据库用户名)\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("6、退出：exit;")]),s._v(" "),e("p",[s._v("7、数据导出，执行命令：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("expdp  dmuser/***** directory=backup_path dumpfile=dmuser_schema.dmp logfile=dmuser_schema_29.log;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("dmuser为用户名\n*****为密码\ndmuser_schema.dmp为导出数据库文件，可自命名，但格式要为.dmp，dmuser_schema_29.log为日志文件，可自命名")]),s._v(" "),e("hr"),s._v(" "),e("h4",{attrs:{id:"b电脑上的操作。impdp-数据导入"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#b电脑上的操作。impdp-数据导入"}},[s._v("#")]),s._v(" B电脑上的操作。impdp 数据导入")]),s._v(" "),e("p",[s._v("将导出的数据库文件复制到目标数据库路径下。")]),s._v(" "),e("p",[s._v("1、运行cmd；")]),s._v(" "),e("p",[s._v("2、登录数据库，输入命令：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("sqlplus system/密码；\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("3、创建目录路径：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("create directory goup_path as ‘E:\\app\\tws\\oradata\\orcl’;   \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("(goup_path为路径名称，可自命名，E:\\app\\tws\\oradata\\orcl为目标数据库路径)")]),s._v(" "),e("p",[s._v("4、退出：exit;")]),s._v(" "),e("p",[s._v("5、数据导入，执行命令：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("impdp  dmuser/*****  directory=goup_path  dumpfile=dmuser_schema.dmp  logfile=dmuser_schema_29.log;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h4",{attrs:{id:"完整演示"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#完整演示"}},[s._v("#")]),s._v(" 完整演示")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("create directory backup_path as 'E:\\XPAD';\ngrant exp_full_database,imp_full_database to xpad706;\nexpdp xpad706/xpad706 directory=backup_path dumpfile=xpad706.dmp logfile=xpad706.log;\nimpdp  xpad706/xpad706  directory=backup_path   dumpfile=xpad706.dmp  logfile=impxpad706.log;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h4",{attrs:{id:"oracle-数据泵-impdp-expdp-导入导出总结"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#oracle-数据泵-impdp-expdp-导入导出总结"}},[s._v("#")]),s._v(" Oracle 数据泵（IMPDP/EXPDP）导入导出总结")]),s._v(" "),e("p",[s._v("Oracle数据泵导入导出是日常工作中常用的基本技术之一，它相对传统的逻辑导入导出要高效，这种特性更适合数据库对象数量巨大的情形，因为我日常运维的数据库对象少则几千，多则几万甚至几十万，所以传统exp/imp就会非常耗时，而数据泵方式就因此脱引而出，下面就详细总结一下数据泵的使用方法，希望能给初学者带来帮助。")]),s._v(" "),e("p",[s._v("一、新建逻辑目录")]),s._v(" "),e("p",[s._v("最好以system等管理员创建逻辑目录，Oracle不会自动创建实际的物理目录“D:\\oracleData”（务必手动创建此目录），仅仅是进行定义逻辑路径dump_dir；")]),s._v(" "),e("div",{staticClass:"language-sql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[s._v("     "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("sql")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" conn system"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v("a?"),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@orcl")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" sysdba"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n     "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("sql")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" directory dump_dir "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'D:\\oracleData'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("二、查看管理员目录（同时查看操作系统是否存在该目录，因为oracle并不关心该目录是否存在，假如不存在，则出错）")]),s._v(" "),e("div",{staticClass:"language-sql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[s._v("     "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("sql")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" dba_directories"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("三、用expdp导出数据")]),s._v(" "),e("p",[s._v("1)导出用户及其对象")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("expdp scott/tiger@orcl schemas=scott dumpfile=expdp.dmp directory=dump_dir;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("2)导出指定表")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("expdp scott/tiger@orcl tables=emp,dept dumpfile=expdp.dmp directory=dump_dir;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("3)按查询条件导")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("expdp scott/tiger@orcl directory=dump_dir dumpfile=expdp.dmp tables=empquery='where deptno=20';\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("4)按表空间导")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("expdp system/manager@orcl directory=dump_dir dumpfile=tablespace.dmptablespaces=temp,example;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("5)导整个数据库")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("expdp system/manager@orcl directory=dump_dir dumpfile=full.dmp full=y;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("四、用impdp导入数据")]),s._v(" "),e("p",[s._v("在正式导入数据前，要先确保要导入的用户已存在，如果没有存在，请先用下述命令进行新建用户")]),s._v(" "),e("div",{staticClass:"language-sql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--创建表空间")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("tablespace")]),s._v(" tb_name datafile "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'D:\\tablespace\\tb_name.dbf'")]),s._v(" size "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1024")]),s._v("m AUTOEXTEND "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--创建用户")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" user_name identified "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" A123456a "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("tablespace")]),s._v(" tb_name "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("temporary")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("tablespace")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TEMP")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--给用户授权")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("sql")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("grant")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("read")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("write")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" directory dump_dir "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("to")]),s._v(" user_name"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("sql")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("grant")]),s._v(" dba"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("resource"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("unlimited "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("tablespace")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("to")]),s._v(" user_name"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br")])]),e("p",[s._v("1)导入用户（从用户scott导入到用户scott）")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("impdp scott/tiger@orcl directory=dump_dir dumpfile=expdp.dmp schemas=scott;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("2)导入表（从scott用户中把表dept和emp导入到system用户中）")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("impdp system/manager@orcl directory=dump_dir dumpfile=expdp.dmptables=scott.dept,scott.emp remap_schema=scott:system;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("3)导入表空间")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("impdp system/manager@orcl directory=dump_dir dumpfile=tablespace.dmp tablespaces=example;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("4)导入数据库")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("impdb system/manager@orcl directory=dump_dir dumpfile=full.dmp full=y;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("5)追加数据")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("impdp system/manager@orcl directory=dump_dir dumpfile=expdp.dmp schemas=systemtable_exists_action\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[s._v("以上是日常工作中实际工作中用到的，希望能够给你得到帮助。\n")])])])])}),[],!1,null,null,null);a.default=r.exports}}]);